<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="~{fragments/head :: head('Tickets')}"></head>

<body>
    <header>
        <nav th:replace="~{fragments/navbar :: navbar('Ticket Platform')}"></nav>
    </header>

    <main>
        <section class="container mt-5">
            <section class="title row">
                <div class="col-12">
                    <h1 class="text-left fw-bold mb-3">
                        Editing Ticket ..
                    </h1>
                </div>
                <div class="search-box edit">
                    <form th:action="@{/tickets/save}" th:object="${ticket}" method="post">
                        <!-- ! TITLE -->
                        <input type="hidden" th:field="*{id}" />
                        <label for="title"><strong>Title</strong></label>
                        <input id="title" type="text" th:field="*{title}" placeholder="Title" />

                        <!-- ! CATEGORY  -->
                        <label for="category"><strong>Category</strong></label>
                        <select id="category" th:field="*{category}">
                            <option value="" disabled selected>Select Category</option>
                            <option th:each="category : ${categories}" th:value="${category.id}"
                                th:text="${category.name}">
                            </option>
                        </select>

                        <!-- ! CREATED ON -->
                        <label for="creationDateDisplay"><strong>Created on:</strong></label>
                        <td>
                            <input type="text" 
                                   th:value="${#temporals.format(ticket.creationDate, 'dd/MM/yyyy HH:mm')}" 
                                   disabled />
                                   <input type="hidden" th:field="*{creationDate}" />
                          </td>
                          

                        <!-- ! STATUS -->
                        <label for="status"><strong>Status</strong></label>
                        <select id="status" th:field="*{status}">
                            <option value="" disabled selected>Select Status</option>
                            <option value="todo">To Do</option>
                            <option value="inprogress">In Progress</option>
                            <option value="closed">Closed</option>
                        </select>
                        <label for="operator"><strong>Operator</strong></label>
                        <select id="operator" th:field="*{operator}">
                            <option value="" disabled selected>Select Operator</option>
                            <option th:each="op : ${operators}" th:value="${op.id}" th:text="${op.fullName}"></option>
                        </select>
                        <button type="submit" class="save-btn">Save</button>
                    </form>
                </div>
                <div>
                    <a th:href="@{/tickets}" class="back-btn">Back</a>
                </div>
            </section>
        </section>
    </main>

    <th:block th:replace="~{fragments/footer :: footer}"></th:block>
    <th:block th:replace="~{fragments/footer :: scripts}"></th:block>
</body>

</html>